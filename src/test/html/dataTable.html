<script>

  // class DataTable {
  //   constructor (headers) {
  //     this.rows = []
  //     this.headers = [...headers]
  //     this.padding = 2 + headers.reduce( (a,b) => a.length > b.length ? a : b ).length
  //   }
  // }
  //
  // let longest = 45
  // let headers = [ `A`, `BB`, `CCC`, `DDDD`, `E`.repeat(longest), `FFFF`, `GGG`, `HH` ]
  // let table = new DataTable(headers)
  // console.assert(table.padding === longest + 2)

  class DataTable {

    constructor (...headers) {
      this.rows = []
      this.headers = [...headers]
      this.padding = 2 + headers.reduce( (a,b) => a.length > b.length ? a : b ).length
    }

    addRow (...cells) {
      this.rows.push(cells)
      return this
    }

    toString () {
      return [this.headers, ...this.rows]
        .map( row => row.map( cell => `| ${cell}`.padEnd(this.padding, ' ') ).join('') ).join(`\n`)
    }
  }

  class RT60Calculator {

    calculateDelays (bpm) {
      let noteDuration = 60000/bpm
      return new DataTable(`NOTE VALUE`, `NOTES`, `DOTTED`, `TRIPLET`)
        .addRow(`1 (ONE BAR)`, noteDuration *= 4)
        .addRow(`1/2`, noteDuration /= 2)
        .addRow(`1/4 (ONE BEAT)`, noteDuration /= 2)
        .addRow(`1/8`, noteDuration /= 2)
        .addRow(`1/16`, noteDuration /= 2)
        .addRow(`1/32`, noteDuration /= 2)
        .addRow(`1/64`, noteDuration /= 2)
        .addRow(`1/128`, noteDuration /= 2)
        .addRow(`1/256`, noteDuration /= 2)
        .addRow(`1/512`, noteDuration /= 2)
    }

  }

  console.info(`${new RT60Calculator().calculateDelays(120)}`)
</script>
