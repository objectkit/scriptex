<script>

  class DataObject {

    static getKeyMap () {
      return {}
    }

    toString () {
      let data = Object.create(null)
      let dict = this.constructor.getKeyMap()
      for (let key in dict) {
        data[dict[key]] = this[key]
      }
      return JSON.stringify(data, null, `  `)
    }
  }

  /* decay data object descriptor */
  class Decay extends DataObject {
    static getKeyMap () {
      return {
        noteValue: `NOTE VALUE`
      , notes: `NOTES`
      , dotted: `DOTTED`
      , triplet: `TRIPLET`
      }
    }

    static compute (decayTime, noteValue) {
      let data = new this()
      data.noteValue = noteValue
      data.notes = decayTime
      data.dotted = data.notes * 0.5
      data.triplet = data.notes * 0.667
      return data
    }
  }


  /* delay data object descriptor */
  class Delay extends DataObject {
    static getKeyMap () {
      return {
        reverbSize: `REVERB SIZE`
      , preDelay: `PRE-DELAY`
      , delayTime: `DELAY TIME`
      , totalTime: `TOTAL TIME`
      }
    }

    static compute (reverbSize, totalTime) {
      let data = new this()
      data.reverbSize = reverbSize
      data.preDelay = (totalTime/64)
      data.delayTime = totalTime - data.preDelay
      data.totalTime = totalTime
      return data
    }
  }

  console.info(`${Decay.compute(500, 4)}`)
  console.info(`${Delay.compute(`Hall`, 2000)}`)

</script>



<script>




/* A generic table to console printer */
/* This will be integrated into the console emulation as console.trace */
/* It operates on the trust system: use as intended */

class Table {
  newRow () {
    let row = new Row()
    this.rows.push(row)
    return row
  }

  toString () {
    return this.rows.join(`\n`)
  }
}

class Row {
  newCell () {
    let cell = new Cell()
    this.cells.push(cell)
    return cell
  }

  toString () {
    return `|${this.cells.join(`|`)}|`
  }
}

class Cell {
  setData (data) {
    this.data = data
  }
  getData () {
    return this.data
  }
  toString () {
    return `${this.getData()}`
  }
}


class AbstractTablePrinter {


  printTable (table) {
    for (let row of table) {
      for (let cell of row) {

      }
    }
  }
}



























</script>
